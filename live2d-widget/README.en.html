<h1 id="live2d-widget">Live2D Widget</h1>
<p><img
src="https://forthebadge.com/images/badges/built-with-love.svg" /> <img
src="https://forthebadge.com/images/badges/uses-html.svg" /> <img
src="https://forthebadge.com/images/badges/made-with-javascript.svg" />
<img
src="https://forthebadge.com/images/badges/contains-cat-gifs.svg" />
<img
src="https://forthebadge.com/images/badges/powered-by-electricity.svg" />
<img
src="https://forthebadge.com/images/badges/makes-people-smile.svg" /></p>
<p><a href="README.md">中文</a></p>
<h2 id="features">Features</h2>
<p>Add Live2D widget to web page. Compatible with PJAX.</p>
<p><img src="assets/screenshot-2.png" width="280"><img src="assets/screenshot-3.png" width="280"><img src="assets/screenshot-1.png" width="270"></p>
<p>(Note: The character models above are for demonstration purposes only
and are not included in this repository.)</p>
<p>You can also check out example web pages:</p>
<ul>
<li>Check the effect in the lower left corner of <a
href="https://zhangshuqiao.org">Mimi's Blog</a></li>
<li><a
href="https://stevenjoezhang.github.io/live2d-widget/demo/demo.html">demo.html</a>
to demonstrate basic functionality</li>
<li><a
href="https://stevenjoezhang.github.io/live2d-widget/demo/login.html">login.html</a>
to imitate the login interface of NPM</li>
</ul>
<h2 id="usage">Usage</h2>
<p>If you are a beginner or only need the basic functionality, you can
simply add the following line of code to the <code>head</code> or
<code>body</code> of your HTML page to load the widget:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">script</span><span class="ot"> src=</span><span class="st">&quot;https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js&quot;</span>&gt;&lt;/<span class="kw">script</span>&gt;</span></code></pre></div>
<p>The placement of the code depends on how your website is built. For
example, if you are using <a href="https://hexo.io">Hexo</a>, you need
to add the above code to the template file of your theme. The
modification process is similar for pages generated using various
template engines.<br />
If your website uses PJAX, since the widget does not need to be
refreshed on every page, make sure to place the script outside the PJAX
refresh area.</p>
<p><strong>However, we strongly recommend configuring the widget
yourself to make it more suitable for your website!</strong><br />
If you are interested in customizing the widget, please refer to the
detailed instructions below.</p>
<h2 id="configuration">Configuration</h2>
<p>You can refer to the source code of <code>autoload.js</code> to see
the available configuration options. <code>autoload.js</code> will
automatically load three files: <code>waifu.css</code>,
<code>live2d.min.js</code>, and <code>waifu-tips.js</code>.
<code>waifu-tips.js</code> creates the <code>initWidget</code> function,
which is the main function for loading the widget. The
<code>initWidget</code> function accepts an object-type parameter as the
configuration for the widget. The following are the available
options:</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 11%" />
<col style="width: 38%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Type</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>waifuPath</code></td>
<td><code>string</code></td>
<td><code>https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/waifu-tips.json</code></td>
<td>Path to the widget resources, can be modified</td>
</tr>
<tr class="even">
<td><code>apiPath</code></td>
<td><code>string</code></td>
<td><code>https://live2d.fghrsh.net/api/</code></td>
<td>API path, optional</td>
</tr>
<tr class="odd">
<td><code>cdnPath</code></td>
<td><code>string</code></td>
<td><code>https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/</code></td>
<td>CDN path, optional</td>
</tr>
<tr class="even">
<td><code>tools</code></td>
<td><code>string[]</code></td>
<td>see <code>autoload.js</code></td>
<td>Buttons of the loaded tools, optional</td>
</tr>
</tbody>
</table>
<p>Among them, the parameters <code>apiPath</code> and
<code>cdnPath</code> only need to set one of them. <code>apiPath</code>
is the URL of the backend API, which can be set up and modified by
yourself (there are many things to modify, not discussed here). You can
refer to <a href="https://github.com/fghrsh/live2d_api">live2d_api</a>
for more information. On the other hand, <code>cdnPath</code> is used to
load resources through CDN services like jsDelivr, which provides better
stability.</p>
<h2 id="customization">Customization</h2>
<p>If the options provided in the "Configuration" section above are not
enough to meet your needs, you can make modifications yourself. The
directory structure of this repository is as follows:</p>
<ul>
<li><code>src/waifu-tips.js</code> contains the logic for the button and
dialog box.</li>
<li><code>waifu-tips.js</code> is automatically generated by
<code>src/waifu-tips.js</code> and it is not recommended to modify it
directly.</li>
<li><code>waifu-tips.json</code> defines the triggering conditions
(<code>selector</code>, CSS selector) and the displayed text when
triggered (<code>text</code>).</li>
<li><code>waifu.css</code> is the style sheet for the virtual
assistant.</li>
</ul>
<p>By default, the CSS selector rules in <code>waifu-tips.json</code>
are effective for the Hexo <a
href="http://github.com/next-theme/hexo-theme-next">NexT theme</a>, but
you may need to modify or add new content to make it suitable for your
own website.<br />
<strong>Warning: The content in <code>waifu-tips.json</code> may not be
suitable for all age groups or appropriate to access during work. Please
ensure their suitability when using them.</strong></p>
<p>To deploy the development testing environment of this project
locally, you need to install Node.js and npm, then execute the following
commands:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/stevenjoezhang/live2d-widget.git</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span></code></pre></div>
<p>If you have any questions, feel free to raise an issue. If you have
any modification suggestions, welcome to submit a pull request.</p>
<h2 id="deploy">Deploy</h2>
<p>After making modifications locally, you can deploy the modified
project on a server or load it via a CDN for use on a webpage.</p>
<h3 id="using-cdn">Using CDN</h3>
<p>To customize the content, you can fork this repository and push the
modified content to your own repository using <code>git push</code>. In
this case, the usage method becomes:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">script</span><span class="ot"> src=</span><span class="st">&quot;https://fastly.jsdelivr.net/gh/username/live2d-widget@latest/autoload.js&quot;</span>&gt;&lt;/<span class="kw">script</span>&gt;</span></code></pre></div>
<p>Replace <code>username</code> with your GitHub username. To ensure
the content of the CDN is refreshed correctly, you need to create a new
git tag and push it to the GitHub repository. Otherwise,
<code>@latest</code> in the URL will still point to the previous
version. Additionally, CDN itself has caching, so the changes may take
some time to take effect. Relevant documentation: - <a
href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">Git Basics -
Tagging</a> - <a
href="https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository">Managing
releases in a repository</a></p>
<h3 id="self-host">Self-host</h3>
<p>Alternatively, you can directly host these files on your server
instead of loading them via CDN.</p>
<ul>
<li>If you can connect to your host via <code>ssh</code>, clone the
forked and modified code repository onto your server.</li>
<li>If your host cannot be accessed via <code>ssh</code> (e.g., a
regular virtual host), modify the code locally and upload the files to
the website directory on the host using <code>ftp</code> or similar
methods.</li>
<li>If you are deploying a static blog using Hexo or similar tools,
place the code of this project in the blog's source file directory
(e.g., the <code>source</code> directory). When redeploying the blog,
the relevant files will be automatically uploaded to the corresponding
paths. To prevent these files from being incorrectly modified by Hexo
plugins, you may need to set <code>skip_render</code>.</li>
</ul>
<p>Afterwards, the entire project can be accessed through your domain
name. You can try opening the <code>autoload.js</code> and
<code>live2d.min.js</code> files in your browser and confirm that their
content is complete and correct. If everything is normal, you can
proceed to modify the constant <code>live2d_path</code> in
<code>autoload.js</code> to the URL of the <code>live2d-widget</code>
directory. For example, if you can access <code>live2d.min.js</code>
through the following URL:</p>
<pre><code>https://example.com/path/to/live2d-widget/live2d.min.js</code></pre>
<p>then modify the value of <code>live2d_path</code> to:</p>
<pre><code>https://example.com/path/to/live2d-widget/</code></pre>
<p>Make sure to include the trailing <code>/</code> in the path. Once
done, add the following code to the interface where you want to add the
live2d-widget:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">script</span><span class="ot"> src=</span><span class="st">&quot;https://example.com/path/to/live2d-widget/autoload.js&quot;</span>&gt;&lt;/<span class="kw">script</span>&gt;</span></code></pre></div>
<p>This will load the widget.</p>
<h2 id="thanks">Thanks</h2>
<p><a href="https://www.browserstack.com/"> <picture>
<source media="(prefers-color-scheme: dark)" height="80" srcset="https://d98b8t1nnulk5.cloudfront.net/production/images/layout/logo-header.png?1469004780">
<source media="(prefers-color-scheme: light)" height="80" srcset="https://live.browserstack.com/images/opensource/browserstack-logo.svg">
<img alt="BrowserStack Logo" height="80" src="https://live.browserstack.com/images/opensource/browserstack-logo.svg">
</picture> </a></p>
<blockquote>
<p>Thanks to <a href="https://www.browserstack.com/">BrowserStack</a>
for providing the infrastructure that allows us to test in real
browsers!</p>
</blockquote>
<p><a href="https://www.jsdelivr.com"> <picture>
<source media="(prefers-color-scheme: dark)" height="80" srcset="https://raw.githubusercontent.com/jsdelivr/jsdelivr-media/master/white/svg/jsdelivr-logo-horizontal.svg">
<source media="(prefers-color-scheme: light)" height="80" srcset="https://raw.githubusercontent.com/jsdelivr/jsdelivr-media/master/default/svg/jsdelivr-logo-horizontal.svg">
<img alt="jsDelivr Logo" height="80" src="https://raw.githubusercontent.com/jsdelivr/jsdelivr-media/master/default/svg/jsdelivr-logo-horizontal.svg">
</picture> </a></p>
<blockquote>
<p>Thanks to jsDelivr for providing public CDN service.</p>
</blockquote>
<p>The code is modified based on this blog post:<br />
https://www.fghrsh.net/post/123.html</p>
<p>Thanks to <a href="https://hitokoto.cn">Hitokoto</a> for providing
the sentence API.</p>
<p>When you click on the paper airplane button of the virtual assistant,
a hidden surprise will appear. This feature is from <a
href="http://www.websiteasteroids.com">WebsiteAsteroids</a>.</p>
<h2 id="more">More</h2>
<p>For more information, you can refer to the following links:<br />
https://nocilol.me/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-02<br />
https://github.com/xiazeyu/live2d-widget.js<br />
https://github.com/summerscar/live2dDemo</p>
<p>Regarding the backend API models:<br />
https://github.com/xiazeyu/live2d-widget-models<br />
https://github.com/xiaoski/live2d_models_collection</p>
<p>In addition to that, there are desktop versions available:<br />
https://github.com/amorist/platelet<br />
https://github.com/akiroz/Live2D-Widget<br />
https://github.com/zenghongtu/PPet<br />
https://github.com/LikeNeko/L2dPetForMac</p>
<p>And also Wallpaper Engine:<br />
https://github.com/guansss/nep-live2d</p>
<h2 id="license">License</h2>
<p>Released under the GNU General Public License v3<br />
http://www.gnu.org/licenses/gpl-3.0.html</p>
<p>This repository does not contain any models. The copyrights of all
Live2D models, images, and motion data used for demonstration purposes
belong to their respective original authors. They are provided for
research and learning purposes only and should not be used for
commercial purposes.</p>
<p>Official Live2D websites:<br />
https://www.live2d.com/en/<br />
https://live2d.github.io</p>
<p>Live2D Cubism Core is provided under the Live2D Proprietary Software
License.<br />
https://www.live2d.com/eula/live2d-proprietary-software-license-agreement_en.html<br />
Live2D Cubism Components are provided under the Live2D Open Software
License.<br />
http://www.live2d.com/eula/live2d-open-software-license-agreement_en.html</p>
<blockquote>
<p>The terms and conditions do prohibit modification, but obfuscating in
<code>live2d.min.js</code> would not be considered illegal
modification.</p>
</blockquote>
<p>https://community.live2d.com/discussion/140/webgl-developer-licence-and-javascript-question</p>
<h2 id="update-log">Update Log</h2>
<p>On October 31, 2018, the original API provided by fghrsh was
discontinued. Please update to the new address. Refer to the following
article for more information:<br />
https://www.fghrsh.net/post/170.html</p>
<p>Starting from January 1, 2020, this project no longer depends on
jQuery.</p>
<p>Starting from November 1, 2022, this project no longer requires users
to separately load Font Awesome.</p>
